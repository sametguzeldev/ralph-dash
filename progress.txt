## Codebase Patterns
- No test framework configured — quality checks are typecheck + build (`npm run build` in frontend/)
- Frontend uses TanStack React Query with 5s refetch intervals for dashboard data
- Project summary counts come from backend API; frontend just displays them
- Tailwind CSS with custom `ralph` purple color palette
- Worktrees lack node_modules — symlink from main project: `ln -sf /path/to/ralph-dash/backend/node_modules ./backend/node_modules` before typechecking
- processManager.ts uses guard pattern `if (!runEnv.VAR)` before reading from DB settings table to avoid overriding env vars already set in process environment

---

## 2026-02-23 - US-003
- Added git identity injection to processManager.ts: reads `gitUserName` and `gitUserEmail` from settings table, sets GIT_AUTHOR_NAME, GIT_AUTHOR_EMAIL, GIT_COMMITTER_NAME, GIT_COMMITTER_EMAIL on spawned process env
- Only injects when none of the 4 git env vars are already set (guard pattern matches Claude token injection)
- If settings not present, spawns normally with no error
- Files changed: `backend/src/services/processManager.ts`
- **Learnings for future iterations:**
  - Worktrees don't have node_modules — symlink from main project before typechecking
  - DB query pattern: `db.prepare('SELECT value FROM settings WHERE key = ?').get('keyName') as { value: string } | undefined`
  - Guard pattern for env injection: check all related vars before querying DB
---

## 2026-02-21 - US-004
- Updated ProjectCard summary text from "X/Y done" to "X done · Y in progress · Z pending" three-state format
- Files changed: `frontend/src/pages/Projects.tsx`
- **Learnings for future iterations:**
  - The ProjectCard component is in `frontend/src/pages/Projects.tsx` (not a separate component file)
  - `inProgressStories` field was already added to `ProjectSummary` in US-002/US-003, so the frontend type was ready
  - Pending count is derived: `totalStories - doneStories - inProgressStories`
---
