{
  "project": "RalphDash",
  "branchName": "develop",
  "description": "Auto Memory Toggle - Add settings toggle to enable/disable Claude's auto-memory feature when running skills in ralph-dash",
  "qualityChecks": {
    "compile": "cd backend && npm run build && cd ../frontend && npm run build"
  },
  "userStories": [
    {
      "id": "US-001",
      "title": "Backend API for auto-memory setting",
      "description": "Add backend endpoints to store and retrieve the auto-memory toggle setting in the database",
      "acceptanceCriteria": [
        "GET /api/settings returns autoMemoryEnabled field (boolean, default true)",
        "PUT /api/settings/auto-memory accepts { autoMemoryEnabled: boolean } and saves to DB",
        "DELETE /api/settings/auto-memory removes the setting from DB",
        "When not set in DB, default to enabled (true)",
        "Backend typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "inProgress": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "processManager.ts env injection",
      "description": "Inject CLAUDE_CODE_DISABLE_AUTO_MEMORY environment variable when spawning Ralph runs",
      "acceptanceCriteria": [
        "Read autoMemoryEnabled from DB settings table",
        "Inject CLAUDE_CODE_DISABLE_AUTO_MEMORY=1 when disabled",
        "Use guard pattern: only inject if not already set in process env",
        "Inject into processManager.ts spawn calls",
        "Backend typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "inProgress": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "skillRunner.ts env injection",
      "description": "Inject CLAUDE_CODE_DISABLE_AUTO_MEMORY environment variable when spawning Claude for skill runs",
      "acceptanceCriteria": [
        "Read autoMemoryEnabled from DB settings table",
        "Inject CLAUDE_CODE_DISABLE_AUTO_MEMORY=1 when disabled",
        "Use guard pattern: only inject if not already set in cleanEnv",
        "Inject into skillRunner.ts spawn calls",
        "Backend typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "inProgress": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Settings UI checkbox",
      "description": "Add checkbox in Settings page to toggle auto-memory on/off",
      "acceptanceCriteria": [
        "Checkbox appears at bottom of Claude Model card",
        "Label: 'Enable auto memory'",
        "Description: 'When enabled, Claude will remember project patterns and learnings across sessions'",
        "Saves immediately on toggle (no Save button)",
        "On save failure: revert checkbox and show error message",
        "Display current state from GET /api/settings",
        "Frontend typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "inProgress": false,
      "notes": ""
    }
  ]
}
